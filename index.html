<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>XTREME CRASH PREDICTOR : MELBET</title>
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #FF6B00 0%, #F9D423 100%);
      --secondary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --success-gradient: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
      --warning-gradient: linear-gradient(135deg, #f83600 0%, #f9d423 100%);
      --whatsapp-gradient: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
      --telegram-gradient: linear-gradient(135deg, #0088cc 0%, #00aced 100%);
      --dark-bg: #121212;
      --darker-bg: #0a0a0a;
      --card-bg: rgba(30, 30, 30, 0.8);
      --text-light: rgba(255, 255, 255, 0.95);
      --text-muted: rgba(255, 255, 255, 0.6);
      --border-radius: 16px;
      --box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }
    
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
      user-select: none; 
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
    }
    
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap');
    
    html, body {
      min-height: 100vh;
      background: var(--dark-bg);
      color: var(--text-light);
      overflow-x: hidden;
      font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
    }
    
    body {
      background: radial-gradient(ellipse at center, #1a1a1a 0%, #0d0d0d 100%);
      display: flex;
      flex-direction: column;
      touch-action: manipulation;
    }
    
    .content { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      padding: 20px 15px;
      max-width: 500px;
      margin: 0 auto;
      width: 100%;
      position: relative;
      z-index: 1;
    }
    
    /* Premium Header */
    .premium-badge {
      position: absolute;
      top: -5px;
      right: 20px;
      background: var(--primary-gradient);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(255, 107, 0, 0.4);
      z-index: 2;
      transform: translateY(-50%);
      animation: float 3s ease-in-out infinite;
    }
    
    header {
      text-align: center;
      padding: 1.2rem 1.5rem;
      font-size: 1.4rem;
      font-weight: 800;
      background: var(--primary-gradient);
      box-shadow: 0 8px 30px rgba(255, 107, 0, 0.3);
      border-radius: var(--border-radius);
      margin: 1.5rem 0 1.8rem;
      border: none;
      position: relative;
      overflow: hidden;
      width: 100%;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: white;
      z-index: 1;
      border: 2px solid rgba(255, 255, 255, 0.15);
    }
    
    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        45deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.1) 50%,
        rgba(255,255,255,0) 100%
      );
      animation: shine 6s infinite;
      opacity: 0.5;
    }
    
    /* Live Time Display */
    #liveTime {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 0 auto 1.8rem;
      font-size: 0.9rem;
      color: var(--text-light);
      background: rgba(255,255,255,0.08);
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.08);
      font-weight: 600;
      width: 100%;
      max-width: 350px;
      backdrop-filter: blur(5px);
    }
    
    #liveTime span {
      font-weight: 700;
      color: #f9d423;
    }
    
    /* Signal Box - Premium Design */
    .signal-container {
      position: relative;
      width: 100%;
      max-width: 300px;
      margin: 1rem auto 2rem;
      perspective: 1000px;
    }
    
    .signal-box {
      width: 100%;
      aspect-ratio: 1/1;
      border-radius: 50%;
      background: var(--card-bg);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border: 2px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(8px);
      box-shadow: var(--box-shadow);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      transform-style: preserve-3d;
    }
    
    .signal-box::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.1) 50%,
        rgba(255,255,255,0) 100%
      );
      transform: rotate(30deg);
      animation: shine 6s infinite;
      opacity: 0.3;
    }
    
    .signal-box.loading {
      animation: pulseGlow 2s infinite alternate;
      border-color: rgba(255, 255, 255, 0.3);
    }
    
    .signal-box.waiting {
      border-color: rgba(248, 168, 0, 0.5);
      box-shadow: 0 0 30px rgba(248, 168, 0, 0.2),
                  0 0 60px rgba(248, 168, 0, 0.1);
    }
    
    .signal-box.active {
      border-color: rgba(0, 200, 83, 0.5);
      box-shadow: 0 0 30px rgba(0, 200, 83, 0.2),
                  0 0 60px rgba(0, 200, 83, 0.1);
      animation: activePulse 2s infinite;
    }
    
    .signal-content {
      text-align: center;
      color: var(--text-light);
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 1.1rem;
      padding: 0 1.5rem;
      width: 100%;
      z-index: 2;
    }
    
    .signal-time {
      font-weight: 700;
      margin-bottom: 0.8rem;
      font-size: 1.3rem;
      color: #fff;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
      background: linear-gradient(to right, #f9d423, #f83600);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .countdown-timer {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-muted);
      margin-top: 0.5rem;
    }
    
    /* Premium Loading Animation */
    .loading-container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
    }
    
    .loading-title {
      font-weight: 800;
      font-size: 1.4rem;
      color: #fff;
      text-align: center;
      line-height: 1.3;
      margin-bottom: 15px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
      background: linear-gradient(to right, #f9d423, #f83600);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .loading-text {
      font-size: 0.95rem;
      color: var(--text-muted);
      text-align: center;
      line-height: 1.4;
      position: relative;
      font-weight: 500;
    }
    
    .loading-dots::after {
      content: '.';
      animation: dots 1.5s infinite;
    }
    
    /* Premium Odds Display */
    .odd-display {
      text-align: center;
      margin: 1.5rem auto;
      font-size: 1.4rem;
      color: white;
      background: var(--warning-gradient);
      padding: 1rem 1.6rem;
      border-radius: 50px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 25px rgba(248, 54, 0, 0.3);
      position: relative;
      overflow: hidden;
      width: 100%;
      max-width: 320px;
      white-space: nowrap;
      min-height: 65px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      z-index: 1;
      transition: all 0.3s ease;
    }
    
    .odd-display::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        45deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.1) 50%,
        rgba(255,255,255,0) 100%
      );
      animation: shine 6s infinite;
      opacity: 0.5;
    }
    
    /* Buttons - Premium Style */
    .buttons-container {
      width: 100%;
      max-width: 320px;
      margin: 0 auto 1.5rem;
    }
    
    .buttons {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
    }
    
    .buttons a {
      text-decoration: none;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      font-weight: 700;
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      text-align: center;
      text-transform: uppercase;
      font-size: 0.95rem;
      letter-spacing: 1px;
      width: 100%;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
      transform: translateZ(0);
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .buttons a::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        45deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,0.1) 50%,
        rgba(255,255,255,0) 100%
      );
      animation: shine 6s infinite;
      opacity: 0.3;
    }
    
    .buttons a i {
      font-size: 1.2rem;
    }
    
    .buttons a.whatsapp {
      background: var(--whatsapp-gradient);
    }
    
    .buttons a.telegram {
      background: var(--telegram-gradient);
    }
    
    .buttons a:hover { 
      transform: translateY(-3px) translateZ(0);
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }
    
    .buttons a:active {
      transform: translateY(1px) translateZ(0);
    }
    
    /* Premium Footer */
    footer {
      text-align: center;
      font-size: 0.8rem;
      padding: 1rem;
      margin-top: 1rem;
      color: var(--text-muted);
      font-weight: 500;
      position: relative;
    }
    
    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    }
    
    /* Premium Animations */
    @keyframes shine {
      0% {
        transform: translateX(-100%) rotate(45deg);
      }
      100% {
        transform: translateX(100%) rotate(45deg);
      }
    }
    
    @keyframes pulseGlow {
      0% { 
        box-shadow: 0 0 15px rgba(248, 168, 0, 0.3); 
      }
      50% { 
        box-shadow: 0 0 30px rgba(248, 168, 0, 0.5); 
      }
      100% { 
        box-shadow: 0 0 15px rgba(248, 168, 0, 0.3); 
      }
    }
    
    @keyframes activePulse {
      0% { 
        transform: scale(1);
        box-shadow: 0 0 20px rgba(0, 200, 83, 0.3); 
      }
      50% { 
        transform: scale(1.01);
        box-shadow: 0 0 40px rgba(0, 200, 83, 0.4); 
      }
      100% { 
        transform: scale(1);
        box-shadow: 0 0 20px rgba(0, 200, 83, 0.3); 
      }
    }
    
    @keyframes dots {
      0%, 20% { content: '.'; }
      40% { content: '..'; }
      60%, 100% { content: '...'; }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(-50%) translateX(0); }
      50% { transform: translateY(-50%) translateX(5px); }
    }
    
    /* Premium Crash Graphics */
    .crash-graphic {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      opacity: 0.15;
    }
    
    .crash-line {
      position: absolute;
      height: 1px;
      background: linear-gradient(90deg, transparent, #f83600, transparent);
      width: 100%;
      animation: crashLineMove 12s linear infinite;
    }
    
    @keyframes crashLineMove {
      0% { top: 10%; opacity: 0; }
      10% { opacity: 0.8; }
      90% { opacity: 0.8; }
      100% { top: 90%; opacity: 0; }
    }
    
    .crash-dot {
      position: absolute;
      width: 6px;
      height: 6px;
      background: #f9d423;
      border-radius: 50%;
      filter: drop-shadow(0 0 4px #f9d423);
      animation: crashDotMove 18s linear infinite;
    }
    
    @keyframes crashDotMove {
      0% { 
        transform: translate(10%, 10%) scale(0.8);
        opacity: 0;
      }
      10% { 
        opacity: 0.8;
      }
      90% { 
        opacity: 0.8;
      }
      100% { 
        transform: translate(90%, 90%) scale(1.2);
        opacity: 0;
      }
    }
    
    /* Premium Notification Popup */
    .notification-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 20px;
      backdrop-filter: blur(5px);
    }
    
    .notification-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .notification-box {
      background: linear-gradient(135deg, rgba(40,40,40,0.95) 0%, rgba(25,25,25,0.95) 100%);
      border-radius: var(--border-radius);
      padding: 25px;
      width: 100%;
      max-width: 340px;
      box-shadow: 0 10px 40px rgba(248, 168, 0, 0.3);
      transform: translateY(20px) scale(0.95);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      border: 1px solid rgba(248, 168, 0, 0.2);
      overflow: hidden;
    }
    
    .notification-overlay.active .notification-box {
      transform: translateY(0) scale(1);
    }
    
    .notification-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(248, 168, 0, 0.15) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      animation: shine 6s infinite;
      z-index: 1;
    }
    
    .notification-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(248, 168, 0, 0.1);
      border: 1px solid rgba(248, 168, 0, 0.3);
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #f9d423;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 2;
    }
    
    .notification-close:hover {
      background: rgba(248, 168, 0, 0.2);
      transform: rotate(90deg);
    }
    
    .notification-content {
      text-align: center;
      padding: 5px;
      font-size: 0.92rem;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.9);
      letter-spacing: 0.2px;
      position: relative;
      z-index: 1;
    }
    
    .notification-content h3 {
      color: #f9d423;
      margin-bottom: 18px;
      font-size: 1.2rem;
      font-weight: 700;
      position: relative;
    }
    
    .notification-content h3::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, #f9d423, #f83600);
      border-radius: 3px;
    }
    
    .notification-content p {
      margin-bottom: 16px;
    }
    
    .team-signature {
      color: #f9d423;
      margin-top: 18px;
      font-size: 0.9rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    /* Mobile Responsiveness */
    @media (max-width: 480px) {
      header {
        font-size: 1.2rem;
        padding: 1rem 1.2rem;
        margin: 1rem 0 1.5rem;
      }
      
      #liveTime {
        font-size: 0.85rem;
        padding: 0.7rem 1.2rem;
        margin-bottom: 1.5rem;
      }
      
      .signal-box {
        max-width: 280px;
      }
      
      .loading-title {
        font-size: 1.2rem;
      }
      
      .odd-display {
        font-size: 1.2rem;
        padding: 0.9rem 1.4rem;
        min-height: 60px;
      }
      
      .buttons a {
        padding: 0.9rem 1.2rem;
        font-size: 0.9rem;
      }
      
      .notification-box {
        padding: 20px;
      }
      
      .notification-content {
        font-size: 0.85rem;
      }
    }
    
    @media (max-width: 380px) {
      header {
        font-size: 1.1rem;
      }
      
      .signal-time {
        font-size: 1.1rem;
      }
      
      .loading-title {
        font-size: 1.1rem;
      }
      
      .odd-display {
        font-size: 1.1rem;
      }
    }
    
    /* Disable bounce effect on mobile */
    html, body {
      overscroll-behavior: none;
      height: 100%;
      overflow: auto;
    }
  </style>
</head>
<body oncontextmenu="return false">
  <div class="content">
    <div class="premium-badge">Premium</div>
    
    <div class="crash-graphic">
      <div class="crash-line" style="top: 15%; animation-delay: 0s;"></div>
      <div class="crash-line" style="top: 35%; animation-delay: -3s;"></div>
      <div class="crash-line" style="top: 65%; animation-delay: -6s;"></div>
      <div class="crash-dot" style="left: 15%; animation-delay: -1s;"></div>
      <div class="crash-dot" style="left: 45%; animation-delay: -4s;"></div>
      <div class="crash-dot" style="left: 75%; animation-delay: -7s;"></div>
    </div>
    
    <header>XTREME CRASH PREDICTOR</header>
    <div id="liveTime">Live: <span id="time">--:--:--</span> | Date: <span id="date">--/--/----</span></div>
    
    <div class="signal-container">
      <div class="signal-box loading" id="signalBox">
        <div class="signal-content" id="signalContent">
          <div class="loading-container">
            <div class="loading-title">PREDICTING NEXT CRASH</div>
            <div class="loading-text">Analyzing game patterns<span class="loading-dots"></span></div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="odd-display" id="oddText">Initializing prediction system...</div>
    
    <div class="buttons-container">
      <div class="buttons">
        <a href="https://chat.whatsapp.com/Jiyuy808D5Q2a8P7IEW72g" class="whatsapp">
          <i class="fab fa-whatsapp"></i> WhatsApp Group
        </a>
        <a href="https://t.me/xtremepredictor" class="telegram">
          <i class="fab fa-telegram"></i> Telegram Channel
        </a>
      </div>
    </div>
    
    <footer>POWERED BY XTREME PREDICTOR</footer>
  </div>

  <!-- Premium Notification Popup -->
  <div class="notification-overlay" id="notificationOverlay">
    <div class="notification-box">
      <button class="notification-close" id="notificationClose">
        <i class="fas fa-times"></i>
      </button>
      <div class="notification-content">
        <h3>XTREME SIGNAL GUIDES</h3>
        <p>මෙම ක්‍රෑෂ් ක්‍රීඩාව සඳහා ඔබට ලබාදෙන සංඥා වලට අනුව ක්‍රීඩා කිරීමේදී, එකම මුදලක් භාවිතා කිරීම සුදුසුම ක්‍රමය වේ.</p>
        <p>"මාර්ටින් ගේල් (Martingale)" ක්‍රමය හෝ ඊට සමාන ගණනාවර්ධන ක්‍රමවේදයන් භාවිතයෙන් ක්‍රීඩා කිරීමෙන් ඔබගේ මුදල් කළමනාකරණය පාලනයෙන් පිට විය හැකි අතර, මෙම ක්‍රමය ක්‍රීඩාවේ ඇල්ගොරිතමය හඳුනාගෙන ඔබ මුදල් ගුණ කරන ආකාරය අනුව ක්‍රීඩාව ඔබට ජය ලබාදීම වළක්වනු ඇත.</p>
        <p>ඒ වෙනුවට, එකම මුදලක් යොදා ලබාදෙන සංඥාවට අනුව ක්‍රීඩා කිරීම සුදුසුයි.</p>
        <div class="team-signature">- Xtreme Predictor Team -</div>
      </div>
    </div>
  </div>

  <script>
    const signalBox = document.getElementById("signalBox");
    const signalContent = document.getElementById("signalContent");
    const oddEl = document.getElementById("oddText");
    const timeEl = document.getElementById("time");
    const dateEl = document.getElementById("date");

    let beepAudio;
    
    function initAudio() {
      try {
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        oscillator.type = 'sine';
        oscillator.frequency.value = 800;
        
        const gainNode = audioContext.createGain();
        gainNode.gain.value = 0;
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        beepAudio = { oscillator, gainNode, audioContext };
      } catch (e) {
        console.error("Audio initialization failed:", e);
        beepAudio = { simpleBeep: true };
      }
    }
    
    function playBeep() {
      if (!beepAudio) initAudio();
      
      const now = Date.now();
      if (now - lastBeepTime < 500) return;
      lastBeepTime = now;
      
      try {
        if (beepAudio.simpleBeep) {
          const beep = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU...');
          beep.play().catch(e => console.error("Beep play failed:", e));
          return;
        }
        
        beepAudio.gainNode.gain.cancelScheduledValues(beepAudio.audioContext.currentTime);
        beepAudio.gainNode.gain.setValueAtTime(0, beepAudio.audioContext.currentTime);
        
        beepAudio.oscillator.start();
        beepAudio.gainNode.gain.setValueAtTime(0.5, beepAudio.audioContext.currentTime);
        beepAudio.gainNode.gain.exponentialRampToValueAtTime(0.001, beepAudio.audioContext.currentTime + 0.3);
        
        setTimeout(() => {
          beepAudio.oscillator.stop();
          initAudio();
        }, 300);
      } catch (e) {
        console.error("Beep play failed:", e);
      }
    }

    let lastBeepTime = 0;

    const signals = [
      { start: "00:00", end: "01:00", odd: "4× | 5×" },
      { start: "05:00", end: "06:00", odd: "4× | 5×" },
      { start: "10:00", end: "11:00", odd: "4× | 5×" },
      { start: "15:00", end: "16:00", odd: "4× | 5×" },
      { start: "20:00", end: "21:00", odd: "4× | 5×" },
      { start: "25:00", end: "26:00", odd: "4× | 5×" },
      { start: "30:00", end: "31:00", odd: "4× | 5×" },
      { start: "35:00", end: "36:00", odd: "4× | 5×" },
      { start: "40:00", end: "41:00", odd: "4× | 5×" },
      { start: "45:00", end: "46:00", odd: "4× | 5×" },
      { start: "50:00", end: "51:00", odd: "4× | 5×" },
      { start: "55:00", end: "56:00", odd: "4× | 5×" }
    ];

    function generateTimelineForCurrentHour(currentHour) {
      const timeline = [];
      
      signals.forEach(signal => {
        const now = new Date();
        const startTime = new Date(now);
        const endTime = new Date(now);
        
        const [startMin, startSec] = signal.start.split(":").map(Number);
        startTime.setHours(currentHour, startMin, startSec, 0);
        
        const endStr = signal.end || signal.start;
        const [endMin, endSec] = endStr.split(":").map(Number);
        endTime.setHours(currentHour, endMin, endSec, 0);
        
        if (!signal.end) {
          endTime.setMinutes(endTime.getMinutes() + 1);
        } else {
          endTime.setMinutes(endTime.getMinutes() + 1);
        }
        
        const displayTime = signal.end 
          ? `${currentHour.toString().padStart(2, '0')}:${signal.start} - ${currentHour.toString().padStart(2, '0')}:${signal.end}`
          : `${currentHour.toString().padStart(2, '0')}:${signal.start}`;
        
        timeline.push({
          displayTime,
          startTime,
          endTime,
          originalEnd: signal.end ? new Date(endTime.getTime() - 60000) : new Date(endTime.getTime() - 60000),
          odd: signal.odd,
          id: `${currentHour}:${signal.start}`
        });
      });

      timeline.sort((a, b) => a.startTime - b.startTime);
      
      return timeline;
    }

    let currentTimeline = [];
    let currentSignalIndex = -1;
    let loadingStart = null;
    const LOADING_DURATION = 8000;
    let lastHourChecked = -1;
    let currentState = 'initial-loading';
    let initialLoad = true;
    let lastPlayedSignalId = null;
    let isFirstSignalOfHour = true;
    let lastSignalStartTime = null;

    function applyShineEffect(element) {
      element.classList.add('shine-effect');
      setTimeout(() => element.classList.remove('shine-effect'), 1500);
    }

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function findCurrentSignalIndex(timeline, now) {
      for (let i = 0; i < timeline.length; i++) {
        if (now < timeline[i].endTime) {
          return i;
        }
      }
      return 0;
    }

    function showLoadingAnimation() {
      signalBox.className = 'signal-box loading';
      signalContent.innerHTML = `
        <div class="loading-container">
          <div class="loading-title">PREDICTING NEXT CRASH</div>
          <div class="loading-text">Analyzing game patterns<span class="loading-dots"></span></div>
        </div>
      `;
    }

    function updateDisplay() {
      const now = new Date();
      const currentHour = now.getHours();
      
      timeEl.textContent = now.toTimeString().split(' ')[0];
      dateEl.textContent = now.toLocaleDateString('en-GB');
      
      if (currentHour !== lastHourChecked) {
        currentTimeline = generateTimelineForCurrentHour(currentHour);
        currentSignalIndex = findCurrentSignalIndex(currentTimeline, now);
        lastHourChecked = currentHour;
        loadingStart = now.getTime();
        currentState = 'loading';
        showLoadingAnimation();
        lastPlayedSignalId = null;
        isFirstSignalOfHour = true;
      }
      
      if (currentTimeline.length === 0) {
        signalContent.innerHTML = `
          <div class="loading-container">
            <div class="loading-title">NO CRASHES PREDICTED</div>
            <div class="loading-text">Please check back later</div>
          </div>
        `;
        oddEl.innerHTML = 'System idle';
        return;
      }
      
      const currentSignal = currentTimeline[currentSignalIndex % currentTimeline.length];
      const nextSignalIndex = (currentSignalIndex + 1) % currentTimeline.length;
      const nextSignal = currentTimeline[nextSignalIndex];
      
      const timeUntilSignal = Math.floor((currentSignal.startTime - now) / 1000);
      const timeUntilEnd = Math.floor((currentSignal.endTime - now) / 1000);
      
      if (currentState === 'initial-loading') {
        if (now.getTime() - loadingStart < LOADING_DURATION) {
          oddEl.innerHTML = 'Initializing prediction system...';
        } else {
          currentState = 'waiting';
          loadingStart = null;
          initialLoad = false;
        }
      }
      else if (currentState === 'loading') {
        if (now.getTime() - loadingStart < LOADING_DURATION) {
          oddEl.innerHTML = 'Calculating optimal odds...';
        } else {
          currentState = 'waiting';
          loadingStart = null;
        }
      }
      else if (now >= currentSignal.endTime) {
        currentSignalIndex = nextSignalIndex;
        loadingStart = now.getTime();
        currentState = 'loading';
        showLoadingAnimation();
        lastPlayedSignalId = null;
        isFirstSignalOfHour = false;
      }
      else if (now >= currentSignal.startTime && now < currentSignal.endTime) {
        currentState = 'active';
        signalBox.className = 'signal-box active';
        signalContent.innerHTML = `
          <div class="signal-time">${currentSignal.displayTime}</div>
          <div class="countdown-timer">Ends in: ${formatTime(timeUntilEnd)}</div>
        `;
        oddEl.textContent = `PREDICTION - ${currentSignal.odd}`;
        applyShineEffect(oddEl);
        
        if (lastPlayedSignalId !== currentSignal.id) {
          playBeep();
          lastPlayedSignalId = currentSignal.id;
        }
      }
      else {
        currentState = 'waiting';
        signalBox.className = 'signal-box waiting';
        signalContent.innerHTML = `
          <div class="signal-time">${currentSignal.displayTime}</div>
          <div class="countdown-timer">Starts in: ${formatTime(timeUntilSignal)}</div>
        `;
        oddEl.textContent = `PREDICTION - ${currentSignal.odd}`;
      }
    }

    // Show notification after 5 seconds with animation
    setTimeout(function() {
      const overlay = document.getElementById('notificationOverlay');
      overlay.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
      overlay.classList.add('active');
    }, 10000);

    // Close button functionality
    document.getElementById('notificationClose').addEventListener('click', function() {
      const btn = this;
      const overlay = document.getElementById('notificationOverlay');
      
      btn.style.transform = 'rotate(90deg)';
      btn.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
      
      overlay.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
      overlay.classList.remove('active');
      
      setTimeout(() => {
        btn.style.transform = 'rotate(0)';
      }, 300);
    });

    document.addEventListener('click', () => {
      initAudio();
    }, { once: true });

    loadingStart = new Date().getTime();
    currentState = 'initial-loading';
    showLoadingAnimation();
    updateDisplay();
    setInterval(updateDisplay, 100);
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</body>
</html>